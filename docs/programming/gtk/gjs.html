<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GJS | Marcin Jahn | Tech Notebook</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-ZSM2N36X8P"></script>
    <script>(function() { if (window.location.href.startsWith('http://localhost')) { return; } window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZSM2N36X8P'); })();</script>
    <meta name="description" content="Building GTK 4 applications with JavaScript">
    <meta property="og:url" content="/programming/gtk/gjs.html">
    <meta property="og:site_name" content="Marcin Jahn | Tech Notebook">
    <meta property="og:title" content="GJS">
    <meta property="og:description" content="Building GTK 4 applications with JavaScript">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Marcin Jahn | Tech Notebook">
    <meta property="article:author" content="Marcin Jahn">
    <meta name="theme-color" content="#7D84B2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="google-site-verification" content="uRhO2txNLDLyS2hZuK4JD4n-rPcdGJ0KMRSwvhSGzog">
    
    <link rel="preload" href="/assets/css/0.styles.d40b778b.css" as="style"><link rel="preload" href="/assets/js/app.a63cdd32.js" as="script"><link rel="preload" href="/assets/js/4.1cfa6f61.js" as="script"><link rel="preload" href="/assets/js/1.edb2ab2a.js" as="script"><link rel="preload" href="/assets/js/103.f15e281a.js" as="script"><link rel="prefetch" href="/assets/js/10.f8429685.js"><link rel="prefetch" href="/assets/js/100.b614f95d.js"><link rel="prefetch" href="/assets/js/101.05ad5c11.js"><link rel="prefetch" href="/assets/js/102.661ebf57.js"><link rel="prefetch" href="/assets/js/104.7c97a852.js"><link rel="prefetch" href="/assets/js/105.07a182ac.js"><link rel="prefetch" href="/assets/js/106.5206b197.js"><link rel="prefetch" href="/assets/js/107.93c504a8.js"><link rel="prefetch" href="/assets/js/108.084f3ee9.js"><link rel="prefetch" href="/assets/js/109.defcf4dc.js"><link rel="prefetch" href="/assets/js/11.ab228136.js"><link rel="prefetch" href="/assets/js/110.bdab5b85.js"><link rel="prefetch" href="/assets/js/111.0c66504a.js"><link rel="prefetch" href="/assets/js/112.a8687c80.js"><link rel="prefetch" href="/assets/js/113.212ee23d.js"><link rel="prefetch" href="/assets/js/114.9d5899dd.js"><link rel="prefetch" href="/assets/js/115.55b02f18.js"><link rel="prefetch" href="/assets/js/116.ee26ba98.js"><link rel="prefetch" href="/assets/js/117.822a038e.js"><link rel="prefetch" href="/assets/js/118.9020f802.js"><link rel="prefetch" href="/assets/js/119.fafd4ad2.js"><link rel="prefetch" href="/assets/js/12.641a04df.js"><link rel="prefetch" href="/assets/js/120.3c7bc15c.js"><link rel="prefetch" href="/assets/js/121.a985747a.js"><link rel="prefetch" href="/assets/js/122.a264ea9a.js"><link rel="prefetch" href="/assets/js/123.294d2a56.js"><link rel="prefetch" href="/assets/js/124.ba9b17dc.js"><link rel="prefetch" href="/assets/js/125.f658e4b8.js"><link rel="prefetch" href="/assets/js/126.dbd95a0f.js"><link rel="prefetch" href="/assets/js/127.6b5f169d.js"><link rel="prefetch" href="/assets/js/128.3208154c.js"><link rel="prefetch" href="/assets/js/129.9395c903.js"><link rel="prefetch" href="/assets/js/13.db8faa28.js"><link rel="prefetch" href="/assets/js/130.c30363b1.js"><link rel="prefetch" href="/assets/js/131.0ac97651.js"><link rel="prefetch" href="/assets/js/132.219a579b.js"><link rel="prefetch" href="/assets/js/133.6f0f76bc.js"><link rel="prefetch" href="/assets/js/134.2e4d205f.js"><link rel="prefetch" href="/assets/js/135.32b88610.js"><link rel="prefetch" href="/assets/js/136.84c40362.js"><link rel="prefetch" href="/assets/js/137.30ebfd60.js"><link rel="prefetch" href="/assets/js/138.8d62761f.js"><link rel="prefetch" href="/assets/js/139.0484efbe.js"><link rel="prefetch" href="/assets/js/14.dd40fe72.js"><link rel="prefetch" href="/assets/js/140.a0a96007.js"><link rel="prefetch" href="/assets/js/141.f786d450.js"><link rel="prefetch" href="/assets/js/142.132e09c2.js"><link rel="prefetch" href="/assets/js/143.6fb0c257.js"><link rel="prefetch" href="/assets/js/144.5502af18.js"><link rel="prefetch" href="/assets/js/145.9ab1fa80.js"><link rel="prefetch" href="/assets/js/146.40dd1a1b.js"><link rel="prefetch" href="/assets/js/147.89f685da.js"><link rel="prefetch" href="/assets/js/148.9784bc69.js"><link rel="prefetch" href="/assets/js/149.358d3989.js"><link rel="prefetch" href="/assets/js/15.418e5643.js"><link rel="prefetch" href="/assets/js/150.85d56963.js"><link rel="prefetch" href="/assets/js/151.75b06976.js"><link rel="prefetch" href="/assets/js/152.badff595.js"><link rel="prefetch" href="/assets/js/153.753e4ab3.js"><link rel="prefetch" href="/assets/js/154.447787bc.js"><link rel="prefetch" href="/assets/js/155.7c69ee37.js"><link rel="prefetch" href="/assets/js/156.cefd7c76.js"><link rel="prefetch" href="/assets/js/157.47fbf046.js"><link rel="prefetch" href="/assets/js/158.5a148160.js"><link rel="prefetch" href="/assets/js/159.b5cc64fa.js"><link rel="prefetch" href="/assets/js/16.adca55aa.js"><link rel="prefetch" href="/assets/js/160.2b54d2f2.js"><link rel="prefetch" href="/assets/js/161.7d643982.js"><link rel="prefetch" href="/assets/js/162.793cb5f2.js"><link rel="prefetch" href="/assets/js/163.d0f31629.js"><link rel="prefetch" href="/assets/js/164.bf6b0830.js"><link rel="prefetch" href="/assets/js/165.ce66946a.js"><link rel="prefetch" href="/assets/js/166.6be36a69.js"><link rel="prefetch" href="/assets/js/167.566740bd.js"><link rel="prefetch" href="/assets/js/168.d6e3647c.js"><link rel="prefetch" href="/assets/js/169.4356690e.js"><link rel="prefetch" href="/assets/js/17.11d4552a.js"><link rel="prefetch" href="/assets/js/170.28c37418.js"><link rel="prefetch" href="/assets/js/171.462a248d.js"><link rel="prefetch" href="/assets/js/172.9a46b238.js"><link rel="prefetch" href="/assets/js/173.f8daa303.js"><link rel="prefetch" href="/assets/js/174.8ade7e99.js"><link rel="prefetch" href="/assets/js/175.3b5aa9b7.js"><link rel="prefetch" href="/assets/js/176.f7ee2479.js"><link rel="prefetch" href="/assets/js/177.f154db3b.js"><link rel="prefetch" href="/assets/js/178.8b106b4d.js"><link rel="prefetch" href="/assets/js/179.ecb20097.js"><link rel="prefetch" href="/assets/js/18.3e9f2232.js"><link rel="prefetch" href="/assets/js/19.7a54fd3d.js"><link rel="prefetch" href="/assets/js/2.7ef33a7b.js"><link rel="prefetch" href="/assets/js/20.8e9d8be9.js"><link rel="prefetch" href="/assets/js/21.8769002f.js"><link rel="prefetch" href="/assets/js/22.0e685557.js"><link rel="prefetch" href="/assets/js/23.bc1b272d.js"><link rel="prefetch" href="/assets/js/24.ad83b2bc.js"><link rel="prefetch" href="/assets/js/25.4cd54044.js"><link rel="prefetch" href="/assets/js/26.da62a656.js"><link rel="prefetch" href="/assets/js/27.892e2271.js"><link rel="prefetch" href="/assets/js/28.c46d3176.js"><link rel="prefetch" href="/assets/js/29.3d6e409a.js"><link rel="prefetch" href="/assets/js/30.c874dc78.js"><link rel="prefetch" href="/assets/js/31.508ff42f.js"><link rel="prefetch" href="/assets/js/32.c0cb2ae4.js"><link rel="prefetch" href="/assets/js/33.75bb17c9.js"><link rel="prefetch" href="/assets/js/34.dc0fbf63.js"><link rel="prefetch" href="/assets/js/35.b113f6c7.js"><link rel="prefetch" href="/assets/js/36.04109ccf.js"><link rel="prefetch" href="/assets/js/37.e6207d49.js"><link rel="prefetch" href="/assets/js/38.734aac40.js"><link rel="prefetch" href="/assets/js/39.7446bb4d.js"><link rel="prefetch" href="/assets/js/40.9a9d2cd3.js"><link rel="prefetch" href="/assets/js/41.92a2dbee.js"><link rel="prefetch" href="/assets/js/42.f6513ead.js"><link rel="prefetch" href="/assets/js/43.338112b6.js"><link rel="prefetch" href="/assets/js/44.b06416af.js"><link rel="prefetch" href="/assets/js/45.a2418a8c.js"><link rel="prefetch" href="/assets/js/46.3d42bbbb.js"><link rel="prefetch" href="/assets/js/47.0ca5be39.js"><link rel="prefetch" href="/assets/js/48.3de6dc6c.js"><link rel="prefetch" href="/assets/js/49.68b04c67.js"><link rel="prefetch" href="/assets/js/5.16bcf2c0.js"><link rel="prefetch" href="/assets/js/50.cd3523b6.js"><link rel="prefetch" href="/assets/js/51.cf0f9311.js"><link rel="prefetch" href="/assets/js/52.26057cfa.js"><link rel="prefetch" href="/assets/js/53.d44b4e79.js"><link rel="prefetch" href="/assets/js/54.d9ef2625.js"><link rel="prefetch" href="/assets/js/55.fa422450.js"><link rel="prefetch" href="/assets/js/56.5c3d322b.js"><link rel="prefetch" href="/assets/js/57.78e2193d.js"><link rel="prefetch" href="/assets/js/58.e4dce92a.js"><link rel="prefetch" href="/assets/js/59.cb2bd608.js"><link rel="prefetch" href="/assets/js/6.ec5930f7.js"><link rel="prefetch" href="/assets/js/60.97715138.js"><link rel="prefetch" href="/assets/js/61.a5119894.js"><link rel="prefetch" href="/assets/js/62.0068c6b7.js"><link rel="prefetch" href="/assets/js/63.9612e4d8.js"><link rel="prefetch" href="/assets/js/64.17417bda.js"><link rel="prefetch" href="/assets/js/65.8a0bebda.js"><link rel="prefetch" href="/assets/js/66.00d59575.js"><link rel="prefetch" href="/assets/js/67.3f059c94.js"><link rel="prefetch" href="/assets/js/68.f4074b4d.js"><link rel="prefetch" href="/assets/js/69.105797a0.js"><link rel="prefetch" href="/assets/js/7.d7443d92.js"><link rel="prefetch" href="/assets/js/70.471d3fef.js"><link rel="prefetch" href="/assets/js/71.c973592f.js"><link rel="prefetch" href="/assets/js/72.6670ee4e.js"><link rel="prefetch" href="/assets/js/73.5574e51c.js"><link rel="prefetch" href="/assets/js/74.1e33859d.js"><link rel="prefetch" href="/assets/js/75.86222be2.js"><link rel="prefetch" href="/assets/js/76.cb845dd5.js"><link rel="prefetch" href="/assets/js/77.c4981ce7.js"><link rel="prefetch" href="/assets/js/78.7988972a.js"><link rel="prefetch" href="/assets/js/79.0d2f1666.js"><link rel="prefetch" href="/assets/js/8.38c2a278.js"><link rel="prefetch" href="/assets/js/80.56d66164.js"><link rel="prefetch" href="/assets/js/81.fd2f0354.js"><link rel="prefetch" href="/assets/js/82.00b5154c.js"><link rel="prefetch" href="/assets/js/83.5e2b7d34.js"><link rel="prefetch" href="/assets/js/84.de09646c.js"><link rel="prefetch" href="/assets/js/85.7a285974.js"><link rel="prefetch" href="/assets/js/86.8a887163.js"><link rel="prefetch" href="/assets/js/87.5f605acf.js"><link rel="prefetch" href="/assets/js/88.05ebfd53.js"><link rel="prefetch" href="/assets/js/89.5eeceabf.js"><link rel="prefetch" href="/assets/js/9.9a40a415.js"><link rel="prefetch" href="/assets/js/90.a95468ec.js"><link rel="prefetch" href="/assets/js/91.da9df6a3.js"><link rel="prefetch" href="/assets/js/92.90123533.js"><link rel="prefetch" href="/assets/js/93.28790e64.js"><link rel="prefetch" href="/assets/js/94.68c713c5.js"><link rel="prefetch" href="/assets/js/95.2a35e4db.js"><link rel="prefetch" href="/assets/js/96.b4f2bc29.js"><link rel="prefetch" href="/assets/js/97.fb46aaee.js"><link rel="prefetch" href="/assets/js/98.7e991e10.js"><link rel="prefetch" href="/assets/js/99.1cc7e689.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d40b778b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar boxshadow"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Marcin Jahn | Tech Notebook</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/programming/" class="nav-link router-link-active">
  Programming
</a></div><div class="nav-item"><a href="/technologies/" class="nav-link">
  Technologies
</a></div><div class="nav-item"><a href="/projects/" class="nav-link">
  Projects
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div> <span class="external-services" data-v-6d74c91a><a target="_blank" href="https://www.linkedin.com/in/marcin-jahn-63a9b915b/?locale=en_US" data-v-06466073 data-v-6d74c91a><img src="/img/linkedin.webp" data-v-06466073></a><a target="_blank" href="https://github.com/marcinjahn" data-v-06466073 data-v-6d74c91a><img src="/img/github.webp" data-v-06466073></a><a target="_blank" href="https://www.cirro.services" data-v-06466073 data-v-6d74c91a><span data-v-06466073>cirro.services</span></a></span> <!----></nav>  <ul class="sidebar-links"><li><a href="/programming/" aria-current="page" class="sidebar-link">/programming/</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/dotnet.webp"></span> <span>.NET</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/angular.webp"></span> <span>Angular</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/javascript.webp"></span> <span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/rust.webp"></span> <span>Rust</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/c.webp"></span> <span>C/C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span class="img-container"><img src="/sidebar-imgs/gtk.webp"></span> <span>GTK</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/programming/gtk/" aria-current="page" class="sidebar-link">GTK</a></li><li><a href="/programming/gtk/gjs.html" aria-current="page" class="active sidebar-link">GJS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#app-dependencies" class="sidebar-link">App Dependencies</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#dev-dependencies" class="sidebar-link">Dev Dependencies</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#commands" class="sidebar-link">Commands</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#js-code" class="sidebar-link">JS Code</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#files" class="sidebar-link">Files</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#widgets" class="sidebar-link">Widgets</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#actions" class="sidebar-link">Actions</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#application-settings" class="sidebar-link">Application Settings</a></li><li class="sidebar-sub-header"><a href="/programming/gtk/gjs.html#references" class="sidebar-link">References</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/css.webp"></span> <span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/unity.webp"></span> <span>Unity</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/lambda.webp"></span> <span>Functional Programming</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/algorithms.webp"></span> <span>Algorithms</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span class="img-container"><img src="/sidebar-imgs/architecture.webp"></span> <span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content"><div class="content__default"><h1 id="gjs"><a href="#gjs" class="header-anchor">#</a> GJS</h1> <p>One of the ways to code GTK apps is using JavaScript. The
<a href="https://gjs.guide/" target="_blank" rel="noopener noreferrer">GJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> project enables that via bindings to various Gnome
libraries (GTK being just one of them).</p> <p>The code execution is handled by the Mozilla SpiderMonkey engine, which is a
JavaScript engine, just like V8 is one. It means that we can use pretty much the
latest ECMAScript features in our GTK apps.</p> <h2 id="app-dependencies"><a href="#app-dependencies" class="header-anchor">#</a> App Dependencies</h2> <p>JS developers are used to pulling dependencies from
<a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The bad news is that many of packages there
will not work, simply because they rely on Node.js APIs, which are not there in
GJS. However, there are also a bunch of libraries that do work, as long as they
do not call any Node.js functions.</p> <p>GJS, as a language binding for the Gnome ecosystem, enables the use of
GObject-based libraries. The full list of APIs and their documentation may be
found at <a href="https://gjs-docs.gnome.org" target="_blank" rel="noopener noreferrer">GJS API Docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="dev-dependencies"><a href="#dev-dependencies" class="header-anchor">#</a> Dev Dependencies</h2> <p>To build GJS apps we need:</p> <ul><li><code>gjs</code> (comes with gnome)</li> <li>Flatpak Builder - <code>flatpak install org.flatpak.Builder</code></li> <li>Gnome Builder IDE - <code>flatpak install flathub org.gnome.Builder</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">App ID</p> <p>Flatpak and Gnome Platform both make use of reverse DNS naming
system. More on that
<a href="https://developer.gnome.org/documentation/tutorials/application-id.html" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h2 id="commands"><a href="#commands" class="header-anchor">#</a> Commands</h2> <p>Building the app:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>flatpak run org.flatpak.Builder --force-clean --user --install build-dir com.marcinjahn.my-app.yml
</code></pre></div><p>Running the app:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>flatpak run com.marcinjahn.my-app
</code></pre></div><h2 id="js-code"><a href="#js-code" class="header-anchor">#</a> JS Code</h2> <h3 id="imports"><a href="#imports" class="header-anchor">#</a> Imports</h3> <p>We can use the ECMAScript import syntax:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> GLib <span class="token keyword">from</span> <span class="token string">'gi://GLib'</span><span class="token punctuation">;</span>
</code></pre></div><p>We can also specify the exact version of the library we're imporing:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'gi://Gtk?version=4.0'</span><span class="token punctuation">;</span> <span class="token comment">// GTK 4.0</span>
<span class="token keyword">import</span> GLib <span class="token keyword">from</span> <span class="token string">'gi://GLib'</span><span class="token punctuation">;</span> <span class="token comment">// latest version available?</span>
</code></pre></div><h3 id="global-object"><a href="#global-object" class="header-anchor">#</a> Global Object</h3> <p>There is a global object called <code>globalThis</code>, which is similar to <code>window</code> in
the browsers. We can assign values to it and access them from anywhere else.</p> <h2 id="files"><a href="#files" class="header-anchor">#</a> Files</h2> <p>Our app will consist of:</p> <ul><li><p>JS code (duh..):</p> <ul><li><p>Entry Point (<code>app.id.js</code>) - starting point of the app.</p> <p>Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// all the &quot;@X&quot; things are placeholders for meson to fill in</span>
#<span class="token operator">!</span>@<span class="token constant">GJS</span>@ <span class="token operator">-</span>m

<span class="token keyword">import</span> GLib <span class="token keyword">from</span> <span class="token string">'gi://GLib'</span><span class="token punctuation">;</span>

<span class="token comment">// package is a GJS module for initializing and running the app</span>
imports<span class="token punctuation">.</span>package<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'@PACKAGE_NAME@'</span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token string">'@PACKAGE_VERSION@'</span><span class="token punctuation">,</span>
    prefix<span class="token operator">:</span> <span class="token string">'@PREFIX@'</span><span class="token punctuation">,</span>
    libdir<span class="token operator">:</span> <span class="token string">'@LIBDIR@'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Import the main module and run the main function</span>
<span class="token keyword">const</span> loop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GLib<span class="token punctuation">.</span>MainLoop</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'resource:///com/marcinjahn/my-app/js/main.js'</span><span class="token punctuation">)</span> <span class="token comment">// GResource path</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">main</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        GLib<span class="token punctuation">.</span><span class="token function">idle_add</span><span class="token punctuation">(</span>GLib<span class="token punctuation">.</span><span class="token constant">PRIORITY_DEFAULT_IDLE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            loop<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// kill the main loop and let the main.js take over</span>
            imports<span class="token punctuation">.</span>package<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>main<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> GLib<span class="token punctuation">.</span><span class="token constant">SOURCE_REMOVE</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>logError<span class="token punctuation">)</span><span class="token punctuation">;</span>
loop<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// starts the loop to keep the app running until main.js is loaded</span>
</code></pre></div></li> <li><p><code>window.js</code> - an app typically subclasses a base <code>GtkWindow</code> to define
code and UI of a window</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> MyWindow <span class="token operator">=</span> GObject<span class="token punctuation">.</span><span class="token function">registerClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    GTypeName<span class="token operator">:</span> <span class="token string">'MyWindow'</span><span class="token punctuation">,</span>
    Template<span class="token operator">:</span> <span class="token string">'resource:///com/marcinjahn/my-app/ui/Window.ui'</span><span class="token punctuation">,</span>
    InternalChildren<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'viewStack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Gtk<span class="token punctuation">.</span>ApplicationWindow <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">vfunc_close_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">vfunc_close_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">run_dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// why?</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><code>application.js</code> - an app typically subclasses a base <code>GtkApplication</code>:</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> MyApplication <span class="token operator">=</span> GObject<span class="token punctuation">.</span><span class="token function">registerClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    GTypeName<span class="token operator">:</span> <span class="token string">'MyApplication'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Gtk<span class="token punctuation">.</span>Application <span class="token punctuation">{</span>
    <span class="token function">vfunc_activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> window <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> application<span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">present</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">vfunc_startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">vfunc_startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#loadStylesheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * This is how we can enable CSS files
     */</span>
    <span class="token function">#loadStylesheet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Load the stylesheet in a CssProvider</span>
        <span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>CssProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        provider<span class="token punctuation">.</span><span class="token function">load_from_resource</span><span class="token punctuation">(</span><span class="token string">'/com/marcinjahn/filebrowser/css/style.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Add the provider to the StyleContext of the default display</span>
        Gtk<span class="token punctuation">.</span>StyleContext<span class="token punctuation">.</span><span class="token function">add_provider_for_display</span><span class="token punctuation">(</span>
            Gdk<span class="token punctuation">.</span>Display<span class="token punctuation">.</span><span class="token function">get_default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            provider<span class="token punctuation">,</span>
            Gtk<span class="token punctuation">.</span><span class="token constant">STYLE_PROVIDER_PRIORITY_APPLICATION</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p><code>main.js</code> - most likely, you will instantiate the app here:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'gi://Gdk?version=4.0'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'gi://Gtk?version=4.0'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> MyApplication <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./application.js'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">argv</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyApplication</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">'application-id'</span><span class="token operator">:</span> pkg<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p><a href="https://docs.gtk.org/gio/struct.Resource.html" target="_blank" rel="noopener noreferrer">GResource<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - an XML listing of
files that will be included in the final binary. Usually, there are separate
GResource files for the source code, and for the other data (images, CSS, UI,
icons, etc.). There are APIs to access GResources (like icons) from the JS
code.</p> <p>Example:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gresources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gresource</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/com/marcinjahn/my-app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>data/splashscreen.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span> <span class="token attr-name">compressed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>dialog.ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span> <span class="token attr-name">preprocess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml-stripblanks<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>menumarkup.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>example.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>data/example.css<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>gresource</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>gresources</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>assets like icons, images</p></li> <li><p>CSS - GTK apps may be styled with CSS, similar to HTML. The difference is that
GTK CSS does not support positioning (e.g. with flexbox). That is done via
specific widget containers, similarly to how WPF does it in the .NET Platform.</p></li> <li><p>UI files - XML describing the layout of various views, very similar to WPF.</p></li> <li><p><a href="https://docs.flatpak.org/en/latest/manifests.html" target="_blank" rel="noopener noreferrer">flatpak manifest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>meson build file(s)</p></li></ul> <h2 id="widgets"><a href="#widgets" class="header-anchor">#</a> Widgets</h2> <p>GTK toolkit wouldn't be of much use without its widgets. Their documenatation
can be found <a href="https://docs.gtk.org/gtk4/visual_index.html" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Widgets have a tree of inheritance (<code>GObject</code> is always a root), making the
whole thing very similar to WPF.</p> <p>Widgets include also layout containers, which help with positioning of other
widgets on the screen. In web development, we'd typically use CSS for that. In
GTK, widgets are the way to do it.</p> <p>Widgets may be placed on the screen in two ways:</p> <ul><li><p>in JS code</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> window <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>ApplicationWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> application<span class="token operator">:</span> <span class="token keyword">this</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>Label</span><span class="token punctuation">(</span><span class="token punctuation">{</span> label<span class="token operator">:</span> <span class="token string">'Hello World!'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>child <span class="token operator">=</span> label<span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">present</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>in UI file</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interface</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyWidget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout-manager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GtkBoxLayout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orientation<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>vertical<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GtkLabel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myLabel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">bind-source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyWidget<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">bind-property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-text<span class="token punctuation">&quot;</span></span> 
                    <span class="token attr-name">bind-flags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sync-create<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>justify<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>center<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interface</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The XML above also shows an example of binding.</p> <p>A UI file like this needs its own class to be defined in JS as well:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> MyWidget <span class="token operator">=</span> GObject<span class="token punctuation">.</span><span class="token function">registerClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    GTypeName<span class="token operator">:</span> <span class="token string">'MyWidget'</span><span class="token punctuation">,</span>
    Template<span class="token operator">:</span> <span class="token string">'resource:///com/marcinjahn/my-app/ui/MyWidget.ui'</span><span class="token punctuation">,</span> <span class="token comment">// link to the UI file above</span>
    CssName<span class="token operator">:</span> <span class="token string">'my-app'</span><span class="token punctuation">,</span> <span class="token comment">// we can style the widget with this identifier</span>
    Properties<span class="token operator">:</span> <span class="token punctuation">{</span>
        WelcomeText<span class="token operator">:</span> GObject<span class="token punctuation">.</span>ParamSpec<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>
            <span class="token string">'my-text'</span><span class="token punctuation">,</span> <span class="token comment">// name</span>
            <span class="token string">'My Text'</span><span class="token punctuation">,</span> <span class="token comment">// nick</span>
            <span class="token string">'The text displayed by the widget'</span><span class="token punctuation">,</span> <span class="token comment">// blurb</span>
            GObject<span class="token punctuation">.</span>ParamFlags<span class="token punctuation">.</span><span class="token constant">READWRITE</span><span class="token punctuation">,</span> <span class="token comment">// flags</span>
            <span class="token string">''</span> <span class="token comment">// default value</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    InternalChildren<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'myLabel'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// similar to Angular's @ViewChild</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Gtk<span class="token punctuation">.</span>Widget <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">welcomeText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_myText <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>

    <span class="token keyword">set</span> <span class="token function">welcomeText</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Do nothing if the new value is the same as the old one</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_myText <span class="token operator">===</span> value<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token comment">// Store the value in an internal property</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_myText <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token comment">// Hide the label if no text is set</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_myText<span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>value<span class="token punctuation">;</span>
        <span class="token comment">// Notify that the value has changed</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">'my-text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <p>Our widgets may have their own properties, and we might set them in UI files of
the widget. These properties are similar to <a href="/programming/angular/components.html#inputs">Angular's
@Inputs</a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> MyWidget <span class="token operator">=</span> GObject<span class="token punctuation">.</span><span class="token function">registerClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	GTypeName<span class="token operator">:</span> <span class="token string">'MyWidget'</span><span class="token punctuation">,</span>
	Template<span class="token operator">:</span> <span class="token string">'resource:///com/marcinjahn/my-app/ui/MyWidget.ui'</span><span class="token punctuation">,</span>
	Properties<span class="token operator">:</span> <span class="token punctuation">{</span>
		MyText<span class="token operator">:</span> GObject<span class="token punctuation">.</span>ParamSpec<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>
			<span class="token string">'my-text'</span><span class="token punctuation">,</span> <span class="token comment">// name</span>
			<span class="token string">'My Text'</span><span class="token punctuation">,</span> <span class="token comment">// nick</span>
			<span class="token string">'The text displayed by the widget'</span><span class="token punctuation">,</span> <span class="token comment">// blurb</span>
			GObject<span class="token punctuation">.</span>ParamFlags<span class="token punctuation">.</span><span class="token constant">READWRITE</span><span class="token punctuation">,</span> <span class="token comment">// flags</span>
			<span class="token string">''</span> <span class="token comment">// default value</span>
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Gtk<span class="token punctuation">.</span>Widget <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`
</code></pre></div><p>We can bind to that property from a UI file like this:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GtkLabel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myLabel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span> 
        <span class="token attr-name">bind-source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyWidget<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">bind-property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-text<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">bind-flags</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sync-create<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>justify<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>center<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Then, when some parent widget displays <code>MyWidget</code>, it can set the value of the
property, like this:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyWidget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>A new value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="css"><a href="#css" class="header-anchor">#</a> CSS</h3> <p>We can create our own CSS classes to style widgets, and we can use already
existing classes, which come with the GTK widgets. Documentation of GTK
specifies these classes under &quot;CSS Nodes&quot; section of each widget. For example, a
<a href="https://docs.gtk.org/gtk4/class.Label.html" target="_blank" rel="noopener noreferrer">Label<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> widget has a node <code>label</code>
with the following classes:</p> <ul><li><code>.selection</code> - when selected</li> <li><code>.link</code> - for each URL included in the label's text</li></ul> <p>Also, GTK defines a bunch of classes that we can freely apply to various
widgets. For example, the <code>.keycap</code> class makes label look like a keyboard key.</p> <h3 id="signals"><a href="#signals" class="header-anchor">#</a> Signals</h3> <p><code>GObject</code> brings over the concept of <em>Signals</em>, which is analogical to events
from the .NET world. Various widgets have their own signals defined (like a
<code>clicked</code> signal of a button), which we can subscribe and react to. Custom
widgets also can have custom signals defined.</p> <p>Her's how to use a signal:</p> <h4 id="connecting-to-a-signal"><a href="#connecting-to-a-signal" class="header-anchor">#</a> Connecting to a signal</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GtkButton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- ... --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>signal</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clicked<span class="token punctuation">&quot;</span></span> <span class="token attr-name">handler</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onButtonClicked<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="defining-the-handler"><a href="#defining-the-handler" class="header-anchor">#</a> Defining the handler:</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyWidget</span> <span class="token keyword">extends</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>Widget</span> <span class="token punctuation">{</span>
	<span class="token comment">/* ... */</span>

	<span class="token function">onButtonClicked</span><span class="token punctuation">(</span><span class="token parameter">_button</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Button clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Some signals have additional parameters that can be used in handlers. The first
parameter is always the object emitting it.</p> <h4 id="custom-signals"><a href="#custom-signals" class="header-anchor">#</a> Custom Signals</h4> <p>In order to define our own signals, we have to:</p> <ol><li><p>Specify the signal to be a part of our widget:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> WelcomeWidget <span class="token operator">=</span> GObject<span class="token punctuation">.</span><span class="token function">registerClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
    Signals<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">'user-added'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">MyWidget</span> <span class="token keyword">extends</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>Widget</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>Emit it</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'user-added'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ol> <p>The parent of the widget with our signal may subscribe to it via the UI file, as
shown before, or in code:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> widget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Connecting to the signal</span>
<span class="token keyword">const</span> handlerId <span class="token operator">=</span> widget<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'user-added'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">example</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'user-added received'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

widget<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'user-added'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Disconnecting the signal</span>
widget<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span>handlerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Advanced Options</p> <p>There's a bunch of configuration that can be applied to signals, all of it is
described in the <a href="https://gjs.guide/guides/gobject/subclassing.html#signals" target="_blank" rel="noopener noreferrer">GJS
Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h2 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h2> <p>Relying on signals too much can quickly bring us at the similar problem that we
have in web frameworks with bubbling signals/events up the components tree - it
becomes cumbersome.</p> <p>This is why GTK defines another concept - <strong>Actions</strong>. These are defined in once
place and can be called from another (even from another app!).</p> <p>If an Action is defined on a Window, any widget within that window can invoke
it. If an Action is defined on an Application, we can call it from anywhere. It
is kind of like a global function. Individual widgets can also add actions (and
then, who can call them?)</p> <h3 id="custom-action"><a href="#custom-action" class="header-anchor">#</a> Custom Action</h3> <p>Defining an Action:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyWindow</span> <span class="token keyword">extends</span> <span class="token class-name">Gtk<span class="token punctuation">.</span>ApplicationWindow</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">#setupActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">#setupActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> myAction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gio<span class="token punctuation">.</span>SimpleAction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			name<span class="token operator">:</span> <span class="token string">'my-action'</span><span class="token punctuation">,</span>
			parameterType<span class="token operator">:</span> GLib<span class="token punctuation">.</span>VariantType<span class="token punctuation">.</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// the actual thing to do</span>
		myAction<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_action<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> parameter <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">unpack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// do something...</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Add the action to the window</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add_action</span><span class="token punctuation">(</span>myAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Activating an Action:</p> <p>We can either do it in code with the <code>gtk_widget_activate_action()</code> function of
any widget, or in the UI file, with a button:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GtkButton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action-name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>win.my-action<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action-target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>'abc'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Actionable interface</p> <p>The <code>GtkButton</code> can invoke actions directly, because it implements the
<a href="https://docs.gtk.org/gtk4/iface.Actionable.html" target="_blank" rel="noopener noreferrer">Actionable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> interface. Other
kinds of button also do.</p></div> <div class="custom-block tip"><p class="custom-block-title">Action Group</p> <p>During invocation, the action is prefixed with the name of its group. For Window
actions, it's &quot;win&quot;, for Application it's &quot;app&quot;.</p></div> <h2 id="application-settings"><a href="#application-settings" class="header-anchor">#</a> Application Settings</h2> <p>The <a href="https://docs.gtk.org/gio/class.Settings.html" target="_blank" rel="noopener noreferrer">Gio.Settings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (<em>GSettings</em>)
may be used to
store the app's settings.</p> <div class="custom-block danger"><p class="custom-block-title">User Data</p> <p>Don't store users' data with <code>Gio.Settings</code>. There are better options for it.</p></div> <p>GSettings stores values as <code>GVariant</code>, with any type. GSettings can be bound to
a widget, making changes to settings automatic with the UI.</p> <p>Settings of our app should have a predefined schema, in XML:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schemalist</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schema</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.marcinjahn.my-app<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/com/marcinjahn/my-app/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>window-width<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default</span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>window-height<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default</span><span class="token punctuation">&gt;</span></span>-1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advanced-view<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schema</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schemalist</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>This should be defined in a file named like
<code>com.marcinjahn.my-app.gschema.xml</code>.</p> <p>Now, we can use settings in various ways:</p> <ul><li><p>bind to them in our widgets</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">settings</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'window-width'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'default-width'</span><span class="token punctuation">,</span> Gio<span class="token punctuation">.</span>SettingsBindFlags<span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">settings</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'window-height'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'default-height'</span><span class="token punctuation">,</span> Gio<span class="token punctuation">.</span>SettingsBindFlags<span class="token punctuation">.</span><span class="token constant">DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Global Settings</p> <p>In this case, we can access GSettings via <code>settings</code>, because this variable
was added to global object in the Application class with:</p> <div class="language-js extra-class"><pre class="language-js"><code>globalThis<span class="token punctuation">.</span>settings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gio<span class="token punctuation">.</span>Settings</span><span class="token punctuation">(</span><span class="token punctuation">{</span> schemaId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></li> <li><p>read a setting</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> advanced <span class="token operator">=</span> settings<span class="token punctuation">.</span><span class="token function">get_boolean</span><span class="token punctuation">(</span><span class="token string">'advanced-view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>subscribe to changes</p> <div class="language-js extra-class"><pre class="language-js"><code>settings<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'changed::advanced-view'</span><span class="token punctuation">,</span> <span class="token parameter">settings</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do somethig...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p>This &quot;guide&quot; has been heavily inspired by the <a href="https://rmnvgr.gitlab.io/gtk4-gjs-book" target="_blank" rel="noopener noreferrer">GJS &amp; GTK 4
tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
It also contains a bunch of information taken from:</p> <ul><li><a href="https://gjs.guide" target="_blank" rel="noopener noreferrer">GJS Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/programming/gtk/" class="prev router-link-active">
        GTK
      </a></span> <span class="next"><a href="/programming/css/responsive-design.html">
        Resonsive Design
      </a>
      
    </span></p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/12/2023, 5:06:29 PM</span></div></footer> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a63cdd32.js" defer></script><script src="/assets/js/4.1cfa6f61.js" defer></script><script src="/assets/js/1.edb2ab2a.js" defer></script><script src="/assets/js/103.f15e281a.js" defer></script>
  </body>
</html>
